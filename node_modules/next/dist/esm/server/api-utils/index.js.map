{"version":3,"sources":["../../../server/api-utils/index.ts"],"names":["getCookieParser","headers","parseCookie","header","cookie","parse","parseCookieFn","require","Array","isArray","join","sendStatusCode","res","statusCode","redirect","statusOrUrl","url","Error","writeHead","Location","write","end","PRERENDER_REVALIDATE_HEADER","PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER","checkIsManualRevalidate","req","previewProps","isManualRevalidate","previewModeId","revalidateOnlyGenerated","COOKIE_NAME_PRERENDER_BYPASS","COOKIE_NAME_PRERENDER_DATA","RESPONSE_LIMIT_DEFAULT","SYMBOL_PREVIEW_DATA","Symbol","SYMBOL_CLEARED_COOKIES","clearPreviewData","options","serialize","previous","getHeader","setHeader","expires","Date","httpOnly","sameSite","process","env","NODE_ENV","secure","path","undefined","Object","defineProperty","value","enumerable","ApiError","constructor","message","sendError","statusMessage","setLazyProp","prop","getter","opts","configurable","optsReset","writable","get","set"],"mappings":"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"}