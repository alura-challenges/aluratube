{"version":3,"sources":["../../../server/lib/mock-request.ts"],"names":["Stream","mockRequest","requestUrl","requestHeaders","requestMethod","requestConnection","resBuffers","mockRes","Writable","isStreamFinished","Promise","resolve","reject","on","err","write","chunk","push","Buffer","isBuffer","from","_write","_encoding","callback","mockHeaders","writeHead","_status","_headers","Object","assign","getHeader","name","toLowerCase","getHeaders","getHeaderNames","keys","setHeader","value","removeHeader","_implicitHeader","connection","finished","statusCode","mockReq","Readable","_read","emit","headers","method","url","req","res","streamPromise"],"mappings":"AAAA,OAAOA,MAAM,MAAM,QAAQ,CAAA;AAE3B,OAAO,SAASC,WAAW,CACzBC,UAAkB,EAClBC,cAA6D,EAC7DC,aAAqB,EACrBC,iBAAuB,EACvB;IACA,MAAMC,UAAU,GAAa,EAAE;IAC/B,MAAMC,OAAO,GAAQ,IAAIP,MAAM,CAACQ,QAAQ,EAAE;IAE1C,MAAMC,gBAAgB,GAAG,IAAIC,OAAO,CAAC,SAAUC,OAAO,EAAEC,MAAM,EAAE;QAC9DL,OAAO,CAACM,EAAE,CAAC,QAAQ,EAAE,IAAMF,OAAO,CAAC,IAAI,CAAC,CAAC;QACzCJ,OAAO,CAACM,EAAE,CAAC,KAAK,EAAE,IAAMF,OAAO,CAAC,IAAI,CAAC,CAAC;QACtCJ,OAAO,CAACM,EAAE,CAAC,OAAO,EAAE,CAACC,GAAQ,GAAKF,MAAM,CAACE,GAAG,CAAC,CAAC;KAC/C,CAAC;IAEFP,OAAO,CAACQ,KAAK,GAAG,CAACC,KAAsB,GAAK;QAC1CV,UAAU,CAACW,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACH,KAAK,CAAC,GAAGA,KAAK,GAAGE,MAAM,CAACE,IAAI,CAACJ,KAAK,CAAC,CAAC;KACrE;IACDT,OAAO,CAACc,MAAM,GAAG,CACfL,KAAsB,EACtBM,SAAiB,EACjBC,QAAoB,GACjB;QACHhB,OAAO,CAACQ,KAAK,CAACC,KAAK,CAAC;QACpB,kFAAkF;QAClF,wFAAwF;QACxF,uBAAuB;QACvB,6FAA6F;QAC7FO,QAAQ,EAAE;KACX;IAED,MAAMC,WAAW,GAAsC,EAAE;IAEzDjB,OAAO,CAACkB,SAAS,GAAG,CAACC,OAAY,EAAEC,QAAa,GAC9CC,MAAM,CAACC,MAAM,CAACL,WAAW,EAAEG,QAAQ,CAAC;IACtCpB,OAAO,CAACuB,SAAS,GAAG,CAACC,IAAY,GAAKP,WAAW,CAACO,IAAI,CAACC,WAAW,EAAE,CAAC;IACrEzB,OAAO,CAAC0B,UAAU,GAAG,IAAMT,WAAW;IACtCjB,OAAO,CAAC2B,cAAc,GAAG,IAAMN,MAAM,CAACO,IAAI,CAACX,WAAW,CAAC;IACvDjB,OAAO,CAAC6B,SAAS,GAAG,CAACL,IAAY,EAAEM,KAAwB,GACxDb,WAAW,CAACO,IAAI,CAACC,WAAW,EAAE,CAAC,GAAGK,KAAK,AAAC;IAC3C9B,OAAO,CAAC+B,YAAY,GAAG,CAACP,IAAY,GAAK;QACvC,OAAOP,WAAW,CAACO,IAAI,CAACC,WAAW,EAAE,CAAC;KACvC;IACDzB,OAAO,CAACgC,eAAe,GAAG,IAAM,EAAE;IAClChC,OAAO,CAACiC,UAAU,GAAGnC,iBAAiB;IACtCE,OAAO,CAACkC,QAAQ,GAAG,KAAK;IACxBlC,OAAO,CAACmC,UAAU,GAAG,GAAG;IAExB,MAAMC,OAAO,GAAQ,IAAI3C,MAAM,CAAC4C,QAAQ,EAAE;IAE1CD,OAAO,CAACE,KAAK,GAAG,IAAM;QACpBF,OAAO,CAACG,IAAI,CAAC,KAAK,CAAC;QACnBH,OAAO,CAACG,IAAI,CAAC,OAAO,CAAC;QACrB,OAAO5B,MAAM,CAACE,IAAI,CAAC,EAAE,CAAC,CAAA;KACvB;IAEDuB,OAAO,CAACI,OAAO,GAAG5C,cAAc;IAChCwC,OAAO,CAACK,MAAM,GAAG5C,aAAa;IAC9BuC,OAAO,CAACM,GAAG,GAAG/C,UAAU;IACxByC,OAAO,CAACH,UAAU,GAAGnC,iBAAiB;IAEtC,OAAO;QACLC,UAAU;QACV4C,GAAG,EAAEP,OAAO;QACZQ,GAAG,EAAE5C,OAAO;QACZ6C,aAAa,EAAE3C,gBAAgB;KAChC,CAAA;CACF"}