{"version":3,"sources":["../../../../server/lib/incremental-cache/index.ts"],"names":["FileSystemCache","path","normalizePagePath","toRoute","pathname","replace","CacheHandler","constructor","_ctx","get","_key","set","_data","IncrementalCache","fs","dev","appDir","flushToDisk","serverDistDir","maxMemoryCacheSize","getPrerenderManifest","incrementalCacheHandlerPath","cacheHandlerMod","process","env","NEXT_RUNTIME","require","default","__NEXT_TEST_MAX_ISR_CACHE","parseInt","prerenderManifest","cacheHandler","_appDir","calculateRevalidate","fromTime","Date","getTime","initialRevalidateSeconds","routes","revalidateAfter","_getPathname","entry","cacheData","curRevalidate","lastModified","now","isStale","undefined","value","notFoundRoutes","includes","data","revalidateSeconds","dataRoute","posix","join","srcRoute","error","console","warn"],"mappings":"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"}