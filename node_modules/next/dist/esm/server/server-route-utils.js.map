{"version":3,"sources":["../../server/server-route-utils.ts"],"names":["getRedirectStatus","modifyRouteRegex","getPathMatch","compileNonPath","prepareDestination","getRequestMeta","stringify","stringifyQs","format","formatUrl","normalizeRepeatedSlashes","getCustomRoute","params","rule","type","restrictedRedirectPaths","match","source","strict","removeUnnamedParams","regexModifier","internal","regex","undefined","name","fn","_req","_res","_params","_parsedUrl","finished","createHeaderRoute","headerRoute","matchesBasePath","matchesLocale","matchesLocaleAPIRoutes","matchesTrailingSlash","has","res","hasParams","Object","keys","length","header","headers","key","value","setHeader","stringifyQuery","req","query","initialQuery","initialQueryValues","values","encodeURIComponent","some","initialQueryVal","Array","isArray","includes","createRedirectRoute","redirectRoute","statusCode","parsedUrl","parsedDestination","appendParamsToQuery","destination","search","updatedDestination","startsWith","redirect","body","send"],"mappings":"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"}